name: Mega Bot Subrek One Shot

on: 
  workflow_dispatch:

jobs:
  execution:
    runs-on: ubuntu-latest
    steps:
      - name: Install Selenium & Driver
        run: |
          pip install selenium webdriver-manager

      - name: Create Python Bot
        run: |
          cat <<EOF > bot.py
          from selenium import webdriver
          from selenium.webdriver.chrome.service import Service
          from webdriver_manager.chrome import ChromeDriverManager
          from selenium.webdriver.common.by import By
          from selenium.webdriver.common.keys import Keys
          import time
          import random
          import string

          def random_string(length=8):
              return ''.join(random.choices(string.ascii_lowercase + string.digits, k=length))

          options = webdriver.ChromeOptions()
          options.add_argument('--headless')
          options.add_argument('--no-sandbox')
          options.add_argument(f'user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36')

          driver = webdriver.Chrome(service=Service(ChromeDriverManager().install()), options=options)

          def main():
              try:
                  # 1. MENUJU HALAMAN DAFTAR GMAIL
                  print("Membuka halaman pendaftaran...")
                  driver.get("https://accounts.google.com/signup")
                  time.sleep(3)

                  # 2. ISI FORM (Logika Random)
                  user_rand = random_string(10)
                  print(f"Mencoba daftar dengan user: {user_rand}")
                  
                  # Contoh isi nama depan (selector bisa berubah tergantung update Google)
                  driver.find_element(By.NAME, "firstName").send_keys("User")
                  driver.find_element(By.NAME, "lastName").send_keys(user_rand)
                  driver.find_element(By.XPATH, "//span[contains(text(), 'Next')]").click()
                  time.sleep(2)

                  # --- DI SINI LANJUTAN LOGIKA KAMU ---
                  # Karena kamu ga kena verifikasi, kamu tinggal lanjutin isi 
                  # tanggal lahir, username, dan password di sini.

                  # 3. SETELAH LOGIN, GAS SUBREK
                  print("Meluncur ke TKP YouTube...")
                  driver.get("https://youtube.com/@asipver123?si=PUEr2IJ_hlz7Tznz")
                  time.sleep(5)
                  
                  sub_button = driver.find_element(By.XPATH, "//span[contains(text(), 'Subscribe')]")
                  sub_button.click()
                  print("SUBREK BERHASIL, BOSKU!")

              except Exception as e:
                  print(f"Ada kendala: {e}")
              finally:
                  driver.quit()

          if __name__ == "__main__":
              main()
          EOF

      - name: Running The Mission
        run: python bot.py
        
